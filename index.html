<!DOCTYPE html>
<html lang="en">
<head>
  <meta property="og:title" content="BGSI Chance Calculator" />
  <meta property="og:description" content="Easy to use site for calculating chances of hatching a secret or legendary" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://wiktorxd-1.github.io/bgsi-chances/" />
  <meta property="og:image" content="https://wiktorxd-1.github.io/bgsi-chances/Images/Icons/favicon.ico" />
  <meta name="theme-color" content="#FBE7BD" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="BGSI Chance Calculator" />
  <meta name="twitter:description" content="Easy to use site for calculating chances of hatching a secret or legendary" />
  <meta name="twitter:image" content="https://wiktorxd-1.github.io/bgsi-chances/Images/Icons/favicon.ico" />
  <link rel="icon" href="Images/Icons/favicon.ico" type="image/ico">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BGSI Chance Calculator</title>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Ferdoka+One&family=Lato:wght@400;700&family=Roboto:wght@400;700&family=Lexend:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <h1>BGSI Chance Calculator</h1>
    <p>Calculator for BGSI legendaries and secret pets chances, easy to use, just enter the luck multiplier and see the chances</p>

    <div class="world-buttons" style="margin-top: 10px; display: flex; align-items: center; gap: 10px;">
      <input type="text" id="search-bar" placeholder="Search eggs or pets..." style="padding: 10px; border-radius: 5px; border: 1px solid #ccc; width: 150px;" oninput="searchEggsAndPets()">
      <button class="world-button overworld" onclick="filterEggsByWorld('1')">
        <img src="Images/Icons/The_Overworld_Icon.webp" alt="Overworld Icon" style="vertical-align: middle; margin-right: 5px;"> Overworld
      </button>
      <button class="world-button minigame" onclick="filterEggsByWorld('2')">
        <img src="Images/Icons/Minigame_Paradise_Icon.webp" alt="Minigame Paradise Icon" style="vertical-align: middle; margin-right: 5px;"> Minigame Paradise
      </button>
      <button class="world-button limited" onclick="filterEggsByWorld('limited')">
        <img src="Images/Icons/Timer_Icon.webp" alt="Limited Icon" style="vertical-align: middle; margin-right: 5px;"> Limited
      </button>
    </div>

    <div id="egg-list"></div>
  </div>

  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>Menu</h2>
    </div>
    <div class="sidebar-content">
      <a href="https://discord.gg/bubbler" class="discord-invite" target="_blank">
        <img src="Images/Icons/discord.ico" alt="Discord Icon">
      </a>
    </div>
    <div style="display: flex; flex-direction: row; justify-content: flex-end; align-items: center; gap: 10px; margin-bottom: 10px;">
      <button class="settings-button-sidebar" onclick="toggleSettingsPopup(event)" style="background: none; border: none; padding: 0; cursor: pointer; margin-right: 5px;">
        <img src="Images/Icons/settings.ico" alt="Settings Icon" style="width: 32px; height: 32px; display: block;">
      </button>
    </div>
    <button class="credits-button-sidebar" onclick="showCreditsPopup(event)">Credits</button>
  </div>


  <div class="credits-popup" id="credits-popup">
    <p><strong>piczu123:</strong> Old site, not being maintained<br>
      <a href="https://piczu123.github.io/BGSI-Chance-Calculator/" target="_blank" class="globe-link" title="https://piczu123.github.io/BGSI-Chance-Calculator/">
        <img src="Images/Icons/website.ico" alt="Website" class="globe-icon">
      </a>
      <a href="https://www.reddit.com/user/Working-Rest-3538/" target="_blank" class="globe-link" title="https://www.reddit.com/user/Working-Rest-3538/">
        <img src="Images/Icons/reddit.ico" alt="Reddit" class="globe-icon">
      </a>
    </p>
    <p><strong>BGSI wiki:</strong> Egg and Pet icons<br>
      <a href="https://bgs-infinity.fandom.com/" target="_blank" class="globe-link" title="https://bgs-infinity.fandom.com/">
        <img src="Images/Icons/website.ico" alt="Website" class="globe-icon">
      </a>
    </p>
    <p><strong>borngame:</strong> Egg and Pet Info<br>
      <a href="https://github.com/borngame" target="_blank" class="globe-link" title="https://github.com/borngame">
        <img src="Images/Icons/website.ico" alt="Website" class="globe-icon">
      </a>
    </p>
  </div>


  <div class="settings-popup" id="settings-popup" style="display:none;">
    <img src="Images/Icons/close.ico" alt="Close" title="Close" id="settings-close-btn" style="position:absolute;top:10px;right:12px;width:20px;height:20px;cursor:pointer;opacity:0.7;z-index:2;" onclick="document.getElementById('settings-popup').style.display='none'">
    <h2 style="margin-right:24px;">Settings</h2>
    
    <label for="theme-select">Choose your preferred theme:</label>
    <div class="theme-options">
      <div class="theme-circle" id="theme-dark" onclick="setTheme('dark')" title="Dark theme">
        <span>Dark theme</span>
      </div>
      <div class="theme-circle" id="theme-purple" onclick="setTheme('purple')" title="Purple (Legacy)">
        <span>Purple (Legacy)</span>
      </div>
    </div>
    
    <label for="font-select">Choose your preferred font:</label>
    <select id="font-select">
      <option value="Arial">Arial (Default)</option>
      <option value="Ferdoka One">Ferdoka One</option>
      <option value="Lato">Lato</option>
      <option value="Roboto">Roboto</option>
      <option value="Comic Sans MS">Comic Sans MS</option>
      <option value="Lexend">Lexend</option>
    </select>
  </div>

  <button class="menu-icon" onclick="toggleSidebar()">
    <img id="menu-icon-img" src="Images/Icons/menu.ico" alt="Menu" />
  </button>

  <script src="script.js"></script>
  <script>
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const menuIconImg = document.getElementById('menu-icon-img');
      if (!menuIconImg) return;
      menuIconImg.classList.add('fading');
      setTimeout(() => {
        if (sidebar.classList.contains('open')) {
          sidebar.classList.remove('open');
          menuIconImg.src = 'Images/Icons/menu.ico';
          menuIconImg.alt = 'Menu';
        } else {
          sidebar.classList.add('open');
          menuIconImg.src = 'Images/Icons/close.ico';
          menuIconImg.alt = 'Close';
        }
        menuIconImg.classList.remove('fading');
      }, 180);
    }

    function showCreditsPopup(event) {
      event.preventDefault();
      event.stopPropagation();
      const popup = document.getElementById('credits-popup');
      popup.classList.add('show');
    }

    function hideCreditsPopup() {
      const popup = document.getElementById('credits-popup');
      popup.classList.remove('show');
    }

    function toggleSettingsPopup(event) {
      event.preventDefault();
      event.stopPropagation();
      const popup = document.getElementById('settings-popup');
      if (popup.style.display === 'block') {
        popup.style.display = 'none';
      } else {
        popup.style.display = 'block';
      }
    }

    function setFont(font) {
      let fontFamily;
      switch (font) {
        case 'Ferdoka One':
          fontFamily = 'Ferdoka One, Arial, Helvetica, sans-serif';
          break;
        case 'Lato':
          fontFamily = 'Lato, Arial, Helvetica, sans-serif';
          break;
        case 'Roboto':
          fontFamily = 'Roboto, Arial, Helvetica, sans-serif';
          break;
        case 'Lexend':
          fontFamily = 'Lexend, Arial, Helvetica, sans-serif';
          break;
        case 'Helvetica':
          fontFamily = 'Helvetica, Arial, sans-serif';
          break;
        case 'Arial':
        default:
          fontFamily = 'Arial, Helvetica, sans-serif';
      }
      document.body.style.fontFamily = fontFamily;
      localStorage.setItem('selectedFont', font);
    }

    document.addEventListener('DOMContentLoaded', function() {

      const fontSelect = document.getElementById('font-select');
      if (fontSelect) {

        const savedFont = localStorage.getItem('selectedFont') || 'Arial';
        fontSelect.value = savedFont;
        setFont(savedFont);
        fontSelect.addEventListener('change', function() {
          setFont(this.value);
        });
      }

      const savedTheme = localStorage.getItem('selectedTheme') || 'dark';
      setTheme(savedTheme);

      if (!localStorage.getItem('selectedTheme')) {
        setTheme('dark');
      }
    });

    function setTheme(theme) {
      document.body.className = theme === 'dark' ? 'theme-dark' : 'theme-purple';
      localStorage.setItem('selectedTheme', theme);

      document.querySelectorAll('.theme-circle').forEach(circle => circle.classList.remove('selected'));
      const selectedCircle = document.getElementById(`theme-${theme}`);
      if (selectedCircle) {
        selectedCircle.classList.add('selected');
      }

      const root = document.documentElement;
      if (theme === 'dark') {
        root.style.setProperty('--main-bg', '#1212121');
        root.style.setProperty('--main-bg-accent', '#2a2a2a');
        root.style.setProperty('--main-bg-accent2', '#3a3a3a');
        root.style.setProperty('--main-text', '#e0e0e0');
        root.style.setProperty('--container-bg', '#1e1e1e');
        root.style.setProperty('--container-border', '#2a2a2a');
        root.style.setProperty('--table-bg', '#2a2a2a');
        root.style.setProperty('--table-th-bg', '#1e1e1e');
        root.style.setProperty('--table-td-bg', '#1e1e1e');
        root.style.setProperty('--table-border', '#3a3a3a');
        root.style.setProperty('--egg-card-bg', '#2a2a2a');
        root.style.setProperty('--egg-header-bg', '#1e1e1e');
        root.style.setProperty('--controls-bg', '#1e1e1e');
        root.style.setProperty('--sidebar-bg', '#1e1e1e');
        root.style.setProperty('--sidebar-header-bg', '#2a2a2a');
        root.style.setProperty('--credits-bg', '#1e1e1e');
        root.style.setProperty('--settings-bg', '#1e1e1e');
        root.style.setProperty('--popup-bg', 'rgba(30,30,30,0.98)');
      } else {
        root.style.setProperty('--main-bg', '#2e003e');
        root.style.setProperty('--main-bg-accent', '#3c005d');
        root.style.setProperty('--main-bg-accent2', '#4a006b');
        root.style.setProperty('--main-text', '#fff');
        root.style.setProperty('--container-bg', '#18101c');
        root.style.setProperty('--container-border', '#2e003e');
        root.style.setProperty('--table-bg', '#5b0077');
        root.style.setProperty('--table-th-bg', '#450056');
        root.style.setProperty('--table-td-bg', '#450056');
        root.style.setProperty('--table-border', '#5e0081');
        root.style.setProperty('--egg-card-bg', '#3c005d');
        root.style.setProperty('--egg-header-bg', '#4a006b');
        root.style.setProperty('--controls-bg', '#4a006b');
        root.style.setProperty('--sidebar-bg', '#4a006b');
        root.style.setProperty('--sidebar-header-bg', '#32004d');
        root.style.setProperty('--credits-bg', '#4a006b');
        root.style.setProperty('--settings-bg', '#4a006b');
        root.style.setProperty('--popup-bg', 'rgba(40,0,60,0.98)');
      }
    }

    function filterEggsByWorld(world) {
      const eggList = document.getElementById('egg-list');
      const eggs = eggList.querySelectorAll('.egg-card');

      const activeButton = document.querySelector('.world-button.active');

      if (activeButton && activeButton.getAttribute('onclick').includes(world)) {
        activeButton.classList.remove('active');
        eggs.forEach(egg => egg.style.display = 'block');
        return;
      }


      document.querySelectorAll('.world-button').forEach(button => button.classList.remove('active'));


      document.querySelector(`.world-button[onclick*="${world}"]`).classList.add('active');

      eggs.forEach(egg => {
        const eggWorld = egg.getAttribute('data-world');
        if (eggWorld === world) {
          egg.style.display = 'block';
        } else {
          egg.style.display = 'none';
        }
      });

      searchEggsAndPets();
    }

    function searchEggsAndPets() {
      const searchTerm = document.getElementById('search-bar').value.toLowerCase();
      const eggList = document.getElementById('egg-list');
      const eggs = eggList.querySelectorAll('.egg-card');


      const selectedWorld = document.querySelector('.world-button.active')?.getAttribute('onclick')?.match(/\('(.*?)'\)/)?.[1];

      eggs.forEach(egg => {
        const eggName = egg.querySelector('.egg-header h2').textContent.toLowerCase();
        const petNames = Array.from(egg.querySelectorAll('.pet-name')).map(pet => pet.textContent.toLowerCase());
        const eggWorld = egg.getAttribute('data-world');

        const matchesSearch = eggName.includes(searchTerm) || petNames.some(petName => petName.includes(searchTerm));
        const matchesWorld = !selectedWorld || eggWorld === selectedWorld;

        if (matchesSearch && matchesWorld) {
          egg.style.display = 'block';
        } else {
          egg.style.display = 'none';
        }
      });
    }

    document.addEventListener('click', (event) => {
      const sidebar = document.getElementById('sidebar');
      const menuIcon = document.querySelector('.menu-icon');
      const menuIconImg = document.getElementById('menu-icon-img');
      const popup = document.getElementById('credits-popup');
      const creditsButton = document.querySelector('.credits-button-sidebar');
      const settingsPopup = document.getElementById('settings-popup');
      const settingsButton = document.querySelector('.settings-button-sidebar');

      if (!sidebar.contains(event.target) && !menuIcon.contains(event.target)) {
        sidebar.classList.remove('open');
        if (menuIconImg) {
          menuIconImg.src = 'Images/Icons/menu.ico';
          menuIconImg.alt = 'Menu';
        }
      }

      if (
        popup &&
        !popup.contains(event.target) &&
        !creditsButton.contains(event.target) &&
        !event.target.closest('.credits-button-sidebar')
      ) {
        hideCreditsPopup();
      }

      if (
        settingsPopup &&
        !settingsPopup.contains(event.target) &&
        !settingsButton.contains(event.target) &&
        !event.target.closest('.settings-button-sidebar')
      ) {
        settingsPopup.style.display = 'none';
      }
    });

    document.getElementById('sidebar').addEventListener('click', (event) => {
      event.stopPropagation();
    });

    document.querySelector('.credits-button-sidebar').addEventListener('mouseenter', (event) => {
      showCreditsPopup(event);
    });

    document.querySelector('.credits-popup').addEventListener('mouseleave', () => {
      hideCreditsPopup();
    });
  </script>
</body>
</html>